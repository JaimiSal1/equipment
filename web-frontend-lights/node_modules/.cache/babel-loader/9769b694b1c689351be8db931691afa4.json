{"ast":null,"code":"import _slicedToArray from\"/home/artagan/Desktop/equipment/web-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./CueStatus.css';/**\n * Represents a basic one-channel input (e.g. a single channel's volume or a\n * single dimmer's intensity).\n */export default function CueStatus(_ref){var data=_ref.data,dispatch=_ref.dispatch,cues=_ref.cues,server=_ref.server;var _useState=useState(data.current),_useState2=_slicedToArray(_useState,2),cue_number=_useState2[0],set_cue_number=_useState2[1];var _useState3=useState(data.current),_useState4=_slicedToArray(_useState3,2),saved_cue_number=_useState4[0],set_saved_cue_number=_useState4[1];var _useState5=useState(data.fade_time),_useState6=_slicedToArray(_useState5,2),cue_time=_useState6[0],set_cue_time=_useState6[1];useEffect(function(){if(data.current!==saved_cue_number){set_saved_cue_number(data.current);set_cue_number(data.current);set_cue_time(data.fade_time);}},[data,saved_cue_number]);return/*#__PURE__*/React.createElement(\"div\",{className:\"CueStatus\"},/*#__PURE__*/React.createElement(\"div\",{className:\"_view\"},/*#__PURE__*/React.createElement(\"span\",{className:\"_previousQ\"},data.previous,\"\\u2190\"),/*#__PURE__*/React.createElement(\"span\",{className:\"_currentQ\"},data.current),/*#__PURE__*/React.createElement(\"span\",{className:\"_nextQ\"},\"\\u2192\",data.next)),/*#__PURE__*/React.createElement(\"progress\",{className:\"_fadeProgress\",max:\"255\",value:data.fade_progress*255}),/*#__PURE__*/React.createElement(\"div\",{className:\"_controls\"},/*#__PURE__*/React.createElement(\"button\",{className:\"_back\",onClick:function onClick(){return server.back();},disabled:data.previous===data.current},\"Back\"),/*#__PURE__*/React.createElement(\"button\",{className:\"_go\",onClick:function onClick(){return server.go();},disabled:!data.fading&&data.next===data.current},\"Go!\"),/*#__PURE__*/React.createElement(\"div\",{className:\"_recording\"},/*#__PURE__*/React.createElement(\"label\",null,\"Cue:\",/*#__PURE__*/React.createElement(\"input\",{type:\"number\",value:cue_number,onChange:function onChange(evt){return set_cue_number(parseInt(evt.target.value)||0);}})),/*#__PURE__*/React.createElement(\"label\",null,\"Time:\",/*#__PURE__*/React.createElement(\"input\",{type:\"number\",value:cue_time,onChange:function onChange(evt){return set_cue_time(parseFloat(evt.target.value)||0);}})),/*#__PURE__*/React.createElement(\"button\",{className:\"_record\",onClick:function onClick(){return server.save_cue(cue_number,cue_time);}},\"Record\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"_delete\",onClick:function onClick(){return delete_cue(cue_number,server);}},\"Delete\"),/*#__PURE__*/React.createElement(\"select\",{className:\"_go_to_q\",value:cue_number,disabled:cues.length===0,onChange:function onChange(e){return server.restore_cue(parseInt(e.target.value));}},cues.length===0?/*#__PURE__*/React.createElement(\"option\",null,\"No cues.\"):cues.map(function(x){return/*#__PURE__*/React.createElement(\"option\",{key:x,value:x},\"Go to \",x);}))))));}function delete_cue(q,server){var confirmation=window.confirm(\"Are you sure you want to delete cue #\".concat(q,\"?\"));if(confirmation===true){server.delete_cue(q);}}","map":{"version":3,"sources":["/home/artagan/Desktop/equipment/web-frontend/src/components/CueStatus/CueStatus.tsx"],"names":["React","useState","useEffect","CueStatus","data","dispatch","cues","server","current","cue_number","set_cue_number","saved_cue_number","set_saved_cue_number","fade_time","cue_time","set_cue_time","previous","next","fade_progress","back","go","fading","evt","parseInt","target","value","parseFloat","save_cue","delete_cue","length","e","restore_cue","map","x","q","confirmation","window","confirm"],"mappings":"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","sourcesContent":["import React, {Dispatch, useState, useEffect} from 'react';\nimport Action, {CueStatusData as ActionCueStatusData} from '../../action';\nimport './CueStatus.css';\nimport Server from '../../server';\n\nexport type CueStatusData = ActionCueStatusData;\n\n/**\n * Properties passed down from the parent into the fader.  These must be\n * updated via `dispatch`.\n */\ntype CueStatusProps = {\n  data: CueStatusData;\n  cues: number[],\n  dispatch: Dispatch<Action>;\n  server: Server;\n}\n\n/**\n * Represents a basic one-channel input (e.g. a single channel's volume or a\n * single dimmer's intensity).\n */\nexport default function CueStatus({data, dispatch, cues, server}: CueStatusProps) {\n  let [cue_number, set_cue_number] = useState(data.current);\n  let [saved_cue_number, set_saved_cue_number] = useState(data.current);\n  let [cue_time, set_cue_time] = useState(data.fade_time);\n\n  useEffect(() => {\n    if (data.current !== saved_cue_number) {\n      set_saved_cue_number(data.current);\n      set_cue_number(data.current);\n      set_cue_time(data.fade_time);\n    }\n  }, [data, saved_cue_number]);\n\n  return (\n    <div className=\"CueStatus\">\n      <div className=\"_view\">\n        <span className=\"_previousQ\">{data.previous}&larr;</span>\n        <span className=\"_currentQ\">{data.current}</span>\n        <span className=\"_nextQ\">&rarr;{data.next}</span>\n      </div>\n      <progress className=\"_fadeProgress\" max=\"255\" value={data.fade_progress * 255}/>\n      <div className=\"_controls\">\n        <button className=\"_back\"\n          onClick={() => server.back()}\n          disabled={data.previous === data.current}>\n          Back\n        </button>\n        <button className=\"_go\"\n          onClick={() => server.go()}\n          disabled={!data.fading && data.next === data.current}>\n          Go!\n        </button>\n        <div className=\"_recording\">\n          <label>\n            Cue:\n            <input type=\"number\" value={cue_number} onChange={(evt) => set_cue_number(parseInt(evt.target.value) || 0)}/>\n          </label>\n          <label>\n            Time:\n            <input type=\"number\" value={cue_time} onChange={(evt) => set_cue_time(parseFloat(evt.target.value) || 0)}/>\n          </label>\n          <button className=\"_record\" onClick={() => server.save_cue(cue_number, cue_time)}>\n            Record\n          </button>\n          <div>\n            <button className=\"_delete\" onClick={() => delete_cue(cue_number, server)}>\n              Delete\n            </button>\n            <select className=\"_go_to_q\" value={cue_number} disabled={cues.length === 0} onChange={(e) => server.restore_cue(parseInt(e.target.value))}>\n              {\n                cues.length === 0 ?\n                <option>No cues.</option>\n                : cues.map(x => {\n                  return <option key={x} value={x}>Go to {x}</option>\n                })\n              }\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction delete_cue(q: number, server: Server) {\n  let confirmation = window.confirm(`Are you sure you want to delete cue #${q}?`);\n  if (confirmation === true) {\n    server.delete_cue(q);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}