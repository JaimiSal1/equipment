{"ast":null,"code":"import _classCallCheck from\"/home/artagan/Desktop/equipment/web-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/artagan/Desktop/equipment/web-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";var SERVER_URL='ws://localhost:8000';var Server=/*#__PURE__*/function(){function Server(dispatch,list_id){_classCallCheck(this,Server);this.socket=void 0;this.dispatch=void 0;this.disconnect_timeout=void 0;this.list_id=void 0;this.dispatch=dispatch;this.socket=this.connect();this.list_id=list_id;}_createClass(Server,[{key:\"connect\",value:function connect(){var _this=this;if(this.socket&&this.socket.readyState===WebSocket.OPEN){return this.socket;}var socket=new WebSocket(SERVER_URL);socket.onmessage=function(evt){return _this.onmessage(evt.data);};socket.onopen=function(){return _this.onopen();};socket.onclose=function(){if(_this.disconnect_timeout===undefined){_this.disconnect_timeout=window.setTimeout(function(){_this.dispatch({type:'connection_change',status:false});},1000);}setTimeout(function(){_this.socket=_this.connect();},100);};socket.onerror=function(){socket.close();};this.socket=socket;return socket;}},{key:\"disconnect\",value:function disconnect(){console.log(\"disconnect\");this.onmessage=function(){};if(this.socket){this.socket.onclose=function(){};this.socket.close();}}},{key:\"onopen\",value:function onopen(){window.clearTimeout(this.disconnect_timeout);this.disconnect_timeout=undefined;this.dispatch({type:'connection_change',status:true});{var data={type:'get-levels',list_id:this.list_id};this.socket.send(JSON.stringify(data));data={type:'list-cues',list_id:this.list_id};this.socket.send(JSON.stringify(data));}{var _data={type:'get-lists'};this.socket.send(JSON.stringify(_data));}}},{key:\"onmessage\",value:function onmessage(data){try{var msg=JSON.parse(data);switch(msg.type){case'get-levels':this.get_levels(msg);break;case'list-cues':this.list_cues(msg);break;case'get-lists':this.get_lists(msg);break;default:console.log(\"Unrecognized message type!\");}}catch(_unused){console.error(\"Error while deserializing!\");}}},{key:\"get_levels\",value:function get_levels(msg){if(parseInt(msg.list)!==this.list_id)return;var values=msg.values||[];this.dispatch({type:'update_channels',values:values.map(function(x){return{channel:parseInt(x.channel),value:parseInt(x.value),status:x.status};})});this.dispatch({type:'update_cue',cue:{current:parseInt(msg.cue.current),fade_time:parseFloat(msg.cue.fade_time),fade_progress:parseFloat(msg.cue.fade_progress),fading:msg.cue.fading===\"true\",last:parseInt(msg.cue.last),next:parseInt(msg.cue.next),previous:parseInt(msg.cue.previous)}});}},{key:\"get_lists\",value:function get_lists(msg){var lists=msg.lists||[];this.dispatch({type:'update_lists',lists:lists.map(function(x){return{name:x.name,id:parseInt(x.number)};})});}},{key:\"list_cues\",value:function list_cues(msg){if(parseInt(msg.list)!==this.list_id)return;var cues=msg.cues||[];this.dispatch({type:'update_cue_list',cues:cues.map(function(x){return parseInt(x.number);})});}},{key:\"rename_list\",value:function rename_list(list_id,name){list_id=Math.floor(list_id);var data={type:'rename-list',list_id:this.list_id,name:name};this.socket.send(JSON.stringify(data));}},{key:\"delete_list\",value:function delete_list(list_id){list_id=Math.floor(list_id);var data={type:'delete-list',list_id:this.list_id};this.socket.send(JSON.stringify(data));}},{key:\"reset_channel\",value:function reset_channel(channel){channel=Math.floor(channel);var data={type:'reset-channel',list_id:this.list_id,channel:channel};this.socket.send(JSON.stringify(data));}},{key:\"block_channel\",value:function block_channel(channel){channel=Math.floor(channel);var data={type:'block-channel',list_id:this.list_id,channel:channel};this.socket.send(JSON.stringify(data));}},{key:\"track_channel\",value:function track_channel(channel){channel=Math.floor(channel);var data={type:'track-channel',list_id:this.list_id,channel:channel};this.socket.send(JSON.stringify(data));}},{key:\"set_level\",value:function set_level(channel,value){channel=Math.floor(channel);value=Math.floor(value);var data={type:'set-levels',list_id:this.list_id,values:[{channel:channel,value:value}]};this.socket.send(JSON.stringify(data));}},{key:\"save_cue\",value:function save_cue(cue,time){cue=Math.floor(cue);var data={type:'save-cue',list_id:this.list_id,cue:cue,time:time};this.socket.send(JSON.stringify(data));}},{key:\"delete_cue\",value:function delete_cue(cue){cue=Math.floor(cue);var data={type:'delete-cue',list_id:this.list_id,cue:cue};this.socket.send(JSON.stringify(data));}},{key:\"restore_cue\",value:function restore_cue(cue){cue=Math.floor(cue);var data={type:'restore-cue',list_id:this.list_id,cue:cue};this.socket.send(JSON.stringify(data));}},{key:\"go\",value:function go(){var data={type:'go-cue',list_id:this.list_id};this.socket.send(JSON.stringify(data));}},{key:\"back\",value:function back(){var data={type:'back-cue',list_id:this.list_id};this.socket.send(JSON.stringify(data));}},{key:\"save_to_disk\",value:function save_to_disk(){var data={type:'save-to-disk'};this.socket.send(JSON.stringify(data));}}]);return Server;}();export{Server as default};","map":{"version":3,"sources":["/home/artagan/Desktop/equipment/web-frontend/src/server.ts"],"names":["SERVER_URL","Server","dispatch","list_id","socket","disconnect_timeout","connect","readyState","WebSocket","OPEN","onmessage","evt","data","onopen","onclose","undefined","window","setTimeout","type","status","onerror","close","console","log","clearTimeout","send","JSON","stringify","msg","parse","get_levels","list_cues","get_lists","error","parseInt","list","values","map","x","channel","value","cue","current","fade_time","parseFloat","fade_progress","fading","last","next","previous","lists","name","id","number","cues","Math","floor","time"],"mappings":"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","sourcesContent":["import {Dispatch} from 'react';\nimport Action from './action';\n\nconst SERVER_URL: string = 'ws://localhost:8000';\n\ntype GetLevels = {\n  type: 'get-levels',\n  list: string,\n  cue: {\n    'current': string,\n    'fade_time': string,\n    'fade_progress': string,\n    'fading': string,\n    'last': string,\n    'next': string,\n    'previous': string,\n  },\n  values: [\n    {\n      'channel': string,\n      'value': string,\n      status: 'manual' | 'lowered' | 'raised' | 'tracked' | 'blocked';\n    }\n  ]\n};\n\ntype GetLists = {\n  type: 'get-lists',\n  lists: [\n    {\n      'number': string,\n      'name': string,\n    }\n  ]\n};\n\ntype ListCues = {\n  type: 'list-cues',\n  list: string,\n  cue: string,\n  cues: [\n    {\n      'number': string,\n    }\n  ]\n};\n\ntype Message = GetLevels | GetLists | ListCues;\n\nexport default class Server {\n  socket: WebSocket;\n  dispatch: Dispatch<Action>;\n  disconnect_timeout?: number;\n  list_id: number;\n\n  constructor(dispatch: Dispatch<Action>, list_id: number) {\n    this.dispatch = dispatch;\n    this.socket = this.connect();\n    this.list_id = list_id;\n  }\n\n  private connect() {\n    if (this.socket && this.socket.readyState === WebSocket.OPEN) {\n      return this.socket;\n    }\n    let socket = new WebSocket(SERVER_URL);\n    socket.onmessage = (evt) => this.onmessage(evt.data);\n    socket.onopen = () => this.onopen();\n    socket.onclose = () => {\n      if (this.disconnect_timeout === undefined) {\n        this.disconnect_timeout = window.setTimeout(() => {\n          this.dispatch({type: 'connection_change', status: false});\n        }, 1000);\n      }\n      setTimeout(() => {\n        this.socket = this.connect();\n      }, 100);\n    }\n    socket.onerror = () => {\n      socket.close();\n    }\n    this.socket = socket;\n    return socket;\n  }\n\n  public disconnect() {\n    console.log(\"disconnect\");\n    this.onmessage = () => {};\n    if (this.socket) {\n      this.socket.onclose = () => {};\n      this.socket.close();\n    }\n  }\n\n  private onopen() {\n    window.clearTimeout(this.disconnect_timeout);\n    this.disconnect_timeout = undefined;\n    this.dispatch({type: 'connection_change', status: true});\n    {\n      let data = {type: 'get-levels', list_id: this.list_id};\n      this.socket.send(JSON.stringify(data));\n      data = {type: 'list-cues', list_id: this.list_id};\n      this.socket.send(JSON.stringify(data));\n    }\n    {\n      let data = {type: 'get-lists'};\n      this.socket.send(JSON.stringify(data));\n    }\n  }\n\n  private onmessage(data: string) {\n    try {\n      let msg: Message = JSON.parse(data);\n      switch (msg.type) {\n        case 'get-levels':\n          this.get_levels(msg);\n          break;\n        case 'list-cues':\n          this.list_cues(msg);\n          break;\n        case 'get-lists':\n          this.get_lists(msg);\n          break;\n        default:\n          console.log(\"Unrecognized message type!\");\n      }\n    } catch {\n      console.error(\"Error while deserializing!\");\n    }\n  }\n\n  private get_levels(msg: GetLevels) {\n    if (parseInt(msg.list) !== this.list_id) return;\n    let values = msg.values || [];\n    this.dispatch({\n      type: 'update_channels',\n      values: values.map((x) => {\n        return {\n          channel: parseInt(x.channel),\n          value: parseInt(x.value),\n          status: x.status,\n        }\n      }),\n    });\n    this.dispatch({\n      type: 'update_cue',\n      cue: {\n        current: parseInt(msg.cue.current),\n        fade_time: parseFloat(msg.cue.fade_time),\n        fade_progress: parseFloat(msg.cue.fade_progress),\n        fading: msg.cue.fading === \"true\",\n        last: parseInt(msg.cue.last),\n        next: parseInt(msg.cue.next),\n        previous: parseInt(msg.cue.previous),\n      }\n    });\n  }\n\n  private get_lists(msg: GetLists) {\n    let lists = msg.lists || [];\n    this.dispatch({\n      type: 'update_lists',\n      lists: lists.map((x) => {\n        return {\n          name: x.name,\n          id: parseInt(x.number)\n        }\n      }),\n    });\n  }\n\n  private list_cues(msg: ListCues) {\n    if (parseInt(msg.list) !== this.list_id) return;\n    let cues = msg.cues || [];\n    this.dispatch({\n      type: 'update_cue_list',\n      cues: cues.map((x) => {\n        return parseInt(x.number);\n      }),\n    });\n  }\n\n  rename_list(list_id: number, name: string) {\n    list_id = Math.floor(list_id);\n    let data = {\n      type: 'rename-list',\n      list_id: this.list_id,\n      name,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  delete_list(list_id: number) {\n    list_id = Math.floor(list_id);\n    let data = {\n      type: 'delete-list',\n      list_id: this.list_id,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  reset_channel(channel: number) {\n    channel = Math.floor(channel);\n    let data = {\n      type: 'reset-channel',\n      list_id: this.list_id,\n      channel,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  block_channel(channel: number) {\n    channel = Math.floor(channel);\n    let data = {\n      type: 'block-channel',\n      list_id: this.list_id,\n      channel,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  track_channel(channel: number) {\n    channel = Math.floor(channel);\n    let data = {\n      type: 'track-channel',\n      list_id: this.list_id,\n      channel,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  set_level(channel: number, value: number) {\n    channel = Math.floor(channel);\n    value = Math.floor(value);\n    let data = {\n      type: 'set-levels',\n      list_id: this.list_id,\n      values: [\n        {\n          channel,\n          value,\n        }\n      ]\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  save_cue(cue: number, time: number) {\n    cue = Math.floor(cue);\n    let data = {\n      type: 'save-cue',\n      list_id: this.list_id,\n      cue,\n      time,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  delete_cue(cue: number) {\n    cue = Math.floor(cue);\n    let data = {\n      type: 'delete-cue',\n      list_id: this.list_id,\n      cue,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  restore_cue(cue: number) {\n    cue = Math.floor(cue);\n    let data = {\n      type: 'restore-cue',\n      list_id: this.list_id,\n      cue,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  go() {\n    let data = {\n      type: 'go-cue',\n      list_id: this.list_id,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  back() {\n    let data = {\n      type: 'back-cue',\n      list_id: this.list_id,\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n\n  save_to_disk() {\n    let data = {\n      type: 'save-to-disk',\n    };\n    this.socket.send(JSON.stringify(data));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}